{"version":3,"file":"index.8c743e9d.js","sources":["../../src/views/pages/article/index.vue","../../src/views/pages/article/useState.js"],"sourcesContent":["<!--\n * @Author       : Eug\n * @Date         : 2021-04-02 11:15:41\n * @LastEditTime : 2021-04-20 16:42:39\n * @LastEditors  : Eug\n * @Descripttion : Descripttion\n * @FilePath     : /chat/src/views/pages/article/index.vue\n-->\n<template>\n  <chat-container>\n    <div class=\"bg-white mb-8 mt-4\">\n      <div class=\"grid grid-cols-1 \">\n        <div\n          :style=\"{backgroundImage: `url(${background})`, zIndex:0}\"\n          class=\"relative z-0 px-4 pt-80 pb-3 bg-fixed from-black bg-cover\"\n        >\n          <h2\n            class=\"text-xl font-semibold text-white\"\n          >{{detail.article_title}}</h2>\n          <p class=\"text-sm font-medium text-white\">{{detail.author}}</p>\n          <p class=\"text-sm font-medium text-white \">{{detail.article_describe}}</p>\n        </div>\n        <div class=\"col-start-1 row-start-2 px-4\">\n          <div class=\"flex items-center  font-medium my-5 \">\n            <svg t=\"1617337447404\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"1722\" width=\"24\" height=\"24\"><path d=\"M511.962 274.837c169.275 0 314.963 99.275 383.15 242.588h66.438C889.625 339.713 715.563 214.25 511.963 214.25c-203.463 0-377.5 125.5-449.5 303.188h66.4c68.225-143.313 213.887-242.6 383.1-242.6z m0 485.226c-169.212 0-314.875-99.313-383.087-242.625H62.463c72 177.812 246.037 303.312 449.5 303.312 203.587 0 377.65-125.5 449.587-303.313h-66.425C826.937 660.75 681.25 760.063 511.962 760.063zM350.275 517.438c0 89.5 72.4 161.875 161.713 161.875s161.687-72.375 161.687-161.875c0-89.275-72.375-161.688-161.688-161.688s-161.712 72.4-161.712 161.688z m262.85 0c0 55.837-45.337 101.125-101.125 101.125-55.837 0-101.025-45.275-101.025-101.125 0-55.75 45.188-101.063 101.025-101.063 55.775 0 101.125 45.313 101.125 101.063z\" fill=\"#515151\" p-id=\"1723\"></path></svg>\n            <div class=\"ml-1\">\n              <span class=\"text-black\">{{detail.page_views}}</span>\n            </div>\n          </div>\n          <div class=\"flex items-center  font-medium my-5 \">\n            <svg t=\"1617337585097\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"3069\" width=\"24\" height=\"24\"><path d=\"M512 797.502429c-11.256368 0-20.363793 9.107425-20.363793 20.363793s9.107425 20.363793 20.363793 20.363793 20.363793-9.107425 20.363793-20.363793C532.466124 806.712185 523.256368 797.502429 512 797.502429M369.248785 759.333108c-9.721409-5.628184-22.205745-2.251274-27.833929 7.470135-5.628184 9.82374-2.251274 22.205745 7.470135 27.833929s22.205745 2.251274 27.833929-7.470135S378.970194 764.961292 369.248785 759.333108M257.196757 341.312526c-9.721409-5.628184-22.205745-2.251274-27.936259 7.470135-5.628184 9.721409-2.251274 22.205745 7.470135 27.833929s22.205745 2.251274 27.833929-7.470135C270.295076 359.425046 267.020496 346.94071 257.196757 341.312526M654.853545 264.666892c9.721409 5.628184 22.205745 2.251274 27.833929-7.470135 5.628184-9.82374 2.251274-22.205745-7.470135-27.833929s-22.205745-2.251274-27.833929 7.470135C641.755226 246.554372 645.029806 259.038708 654.853545 264.666892M206.031447 491.533876c-11.256368 0-20.363793 9.107425-20.363793 20.363793s9.107425 20.363793 20.363793 20.363793 20.363793-9.107425 20.363793-20.363793C226.39524 500.743632 217.287815 491.533876 206.031447 491.533876M236.832963 647.281079c-9.721409 5.628184-13.098319 18.11252-7.470135 27.833929s18.11252 13.098319 27.936259 7.470135c9.721409-5.628184 13.098319-18.11252 7.470135-27.833929C259.038708 645.029806 246.554372 641.652895 236.832963 647.281079M348.782661 229.260497c-9.721409 5.628184-13.098319 18.11252-7.470135 27.833929s18.11252 13.098319 27.833929 7.470135 13.098319-18.11252 7.470135-27.833929C371.090736 227.009224 358.606401 223.632313 348.782661 229.260497M766.803243 341.312526c-9.721409 5.628184-13.098319 18.11252-7.470135 27.833929s18.11252 13.098319 27.833929 7.470135 13.098319-18.11252 7.470135-27.833929C789.008988 339.061252 776.626983 335.684342 766.803243 341.312526M817.968553 491.533876c-11.256368 0-20.363793 9.107425-20.363793 20.363793s9.107425 20.363793 20.363793 20.363793 20.363793-9.107425 20.363793-20.363793C838.434677 500.743632 829.224922 491.533876 817.968553 491.533876M512 63.177901c-247.844761 0-448.822099 200.977337-448.822099 448.822099s200.875007 448.822099 448.822099 448.822099c247.844761 0 448.822099-200.875007 448.822099-448.822099C960.822099 264.155239 759.844761 63.177901 512 63.177901M512 919.889851c-225.332025 0-407.992181-182.660156-407.992181-407.992181s182.660156-407.889851 407.992181-407.889851 407.992181 182.660156 407.992181 407.992181S737.332025 919.889851 512 919.889851M654.853545 759.333108c-9.721409 5.628184-13.098319 18.11252-7.470135 27.833929s18.11252 13.098319 27.833929 7.470135 13.098319-18.11252 7.470135-27.833929C677.05929 756.979504 664.574954 753.704924 654.853545 759.333108M695.581132 491.533876l-104.888885 0c-7.470135-28.447912-29.77821-50.960649-58.328453-58.328453l0-227.276307c0-11.256368-9.107425-20.363793-20.363793-20.363793s-20.363793 9.107425-20.363793 20.363793l0 227.276307c-35.099403 9.107425-61.193711 40.727587-61.193711 78.692247 0 45.127803 36.532031 81.557504 81.557504 81.557504 37.96466 0 69.584821-26.094308 78.692247-61.193711l104.888885 0c11.256368 0 20.363793-9.107425 20.363793-20.363793C716.047256 500.743632 706.8375 491.533876 695.581132 491.533876M512 552.727587c-22.512736 0-40.829917-18.21485-40.829917-40.829917 0-22.512736 18.21485-40.829917 40.829917-40.829917 22.512736 0 40.829917 18.317181 40.829917 40.829917C552.829917 534.512736 534.512736 552.727587 512 552.727587M787.167037 647.281079c-9.721409-5.628184-22.205745-2.251274-27.833929 7.470135s-2.251274 22.205745 7.470135 27.833929 22.205745 2.251274 27.833929-7.470135S796.990776 652.909264 787.167037 647.281079\" p-id=\"3070\"></path></svg>\n            <div class=\"ml-1\">\n              <span>{{lib.FormatTimer(detail.create_time)}}</span>\n            </div>\n          </div>\n          <hr class=\"w-16 border-gray-300 hidden\" />\n        </div>\n        <div class=\"col-start-1 row-start-3 space-y-3 px-4\">\n          <div class=\"previewContainer markdown-body\"  v-html=\"marked(detail.article_content,{})\"></div>\n        </div>\n      </div>\n    </div>\n  </chat-container>\n</template>\n\n<script>\nimport marked from \"marked\";\nimport hljs from \"highlight.js\";\nimport { toRefs, getCurrentInstance, defineComponent } from \"vue\";\nimport { useStates, useArticle } from \"./useState\";\nimport lib from '/@/lib'\nmarked.setOptions({\n  renderer: new marked.Renderer(),\n  gfm: true,\n  tables: true,\n  breaks: false,\n  pedantic: false,\n  // sanitize: true,\n  smartLists: true,\n  smartypants: false,\n  highlight: code => {\n    return hljs.highlightAuto(code).value;\n  }\n});\nexport default defineComponent({\n  name: \"ArticleDetail\",\n  setup(props, ctx) {\n    const state = useStates(props);\n    state.currentVM = getCurrentInstance().proxy;\n    const { useGetArticleDetail, useGetBackground } = useArticle(props, state, ctx);\n    useGetArticleDetail()\n    useGetBackground()\n    return {\n      ...toRefs(state),\n      lib,\n      marked\n    };\n  }\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.show{\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n.indexContainer {\n  width: 100%;\n  height: 100%;\n  background: #ddd;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n}\n.btnsContainer{\n  position: absolute;\n  z-index: 10;\n  left: 65px;\n  top: 5px;\n  height: 25px;\n  min-width: 300px;\n  // background: pink;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  .btn{\n      display: inline-block;\n      border:1px solid #ccc;\n      margin-right: 10px;\n      box-sizing: border-box;\n      padding: 0 10px;\n      background: #fff;\n      font-size: 12px;\n      height: 25px;\n      line-height: 25px;\n      cursor:pointer;\n      moz-user-select: -moz-none; \n      -moz-user-select: none; \n      -o-user-select:none; \n      -khtml-user-select:none; /* you could also put state in a class */ \n      -webkit-user-select:none;/* and add the CSS class here instead */ \n      -ms-user-select:none; \n      user-select:none;/**禁止选中文字*/ \n      &:active{\n          opacity: 0.8;\n          background: lightblue;\n      }\n  }\n}\n.maskContainer{\n  position: absolute;\n  left: 0;\n  top: 0;\n  height: 100%;\n  width: 100%;\n  height: 100vh;\n  width: 100vw;\n  background: rgba(0,0,0,0.5);\n  // z-index: 100;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  .contentContainer{\n      width: 60%;\n      height: 60%;\n      background: #fefefe;\n      padding: 20px;\n      box-sizing: border-box;\n      position: relative;\n      .showAreaContainer{\n          height: 100%;\n          width: 100%;\n          outline: none;\n          background: #eee;\n          display: block;\n          resize: none;\n          padding: 10px;\n          box-sizing: border-box;\n      }\n      .closeBtnContainer{\n          position: absolute;\n          height: 30px;\n          width: 30px;\n          right: -40px;\n          top: -40px;\n          border:1px solid #fff;\n          border-radius: 50%;\n          &::before{\n              content: '';\n              position: absolute;\n              width: 70%;\n              height: 2px;\n              display: bblock;\n              background: #fff;\n              left: 15%;\n              top: calc(50% - 1px);\n              transform: rotate(45deg);\n              -webkit-transform: rotate(45deg);\n              -moz-transform: rotate(45deg);\n          }\n          &::after{\n              content: '';\n              position: absolute;\n              width: 70%;\n              height: 2px;\n              display: bblock;\n              background: #fff;\n              left: 15%;\n              top: calc(50% - 1px);\n              transform: rotate(-45deg);\n              -webkit-transform: rotate(-45deg);\n              -moz-transform: rotate(-45deg);\n          }\n      }\n  }\n}\n\n.editorContainer {\n  width: 90%;\n  height: 90%;\n  border: 1px solid #ddd;\n}\n</style>\n<style lang=\"scss\">\n@import url(\"./index.css\");\n.mdContainer {\n  width: 100%;\n  height: 100%;\n  background: lightblue;\n  &.fullPage {\n    position: fixed;\n    z-index: 1000;\n    left: 0;\n    top: 0;\n  }\n  .navContainer {\n    width: 100%;\n    height: 36px;\n    background: #fff;\n    box-sizing: border-box;\n    border-bottom: 1px solid #eee;\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    padding: 0 10px;\n    .nameContainer {\n      color: lightblue;\n      margin-right: 10px;\n      cursor: pointer;\n    }\n    .markContainer {\n      width: auto;\n      height: 100%;\n      margin-left: 0px;\n      ul.markListGroup {\n        height: 100%;\n        width: auto;\n        display: flex;\n        justify-content: flex-start;\n        align-items: center;\n        li.markListItem {\n          list-style: none;\n          width: 20px;\n          height: 20px;\n          margin: 0 2px;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          cursor: pointer;\n          font-size: 12px;\n          color: #333;\n          &:hover {\n            background: #eee;\n          }\n        }\n      }\n    }\n  }\n  .mdBodyContainer {\n    width: 100%;\n    height: calc(100% - 36px);\n    background: #fff;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    box-sizing: border-box;\n    &.noMenu {\n      height: 100%;\n    }\n  }\n}\n\n// 编辑区域\n.editContainer {\n  height: 100%;\n  width: 100%;\n  box-sizing: border-box;\n  border-right: 1px solid #ddd;\n  background: #333;\n  color: #fff;\n  padding: 10px;\n  .mdEditor {\n    height: 100%;\n    width: 100%;\n    background: transparent;\n    outline: none;\n    color: #fff;\n    resize: none;\n  }\n}\n\n// 预览区\n.previewContainer {\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  background: #fff;\n  overflow: auto;\n  padding: 10px;\n}\n</style>","/* \n * @Author       : Eug\n * @Date         : 2021-04-02 11:26:17\n * @LastEditTime : 2021-04-20 16:43:02\n * @LastEditors  : Eug\n * @Descripttion : Descripttion\n * @FilePath     : /chat/src/views/pages/article/useState.js\n */\nimport { reactive, watch } from \"vue\"\nimport server from '/@/server'\n\nexport const useStates = (props) => {\n  return reactive({\n    currentVM: null,\n    background: '',\n    detail: {\n      article_id: '',\n      article_title: '暂无标题',\n      article_describe: '暂无描述',\n      article_content: '## 暂无内容',\n      author: '暂无作者',\n      page_views: 0,\n      create_time: 0\n    }\n  })\n}\n\nexport const useArticle = (props, state, {emit}) => {\n  const useGetBackground = async () => {\n    try {\n      let res = await server.GetBackground()\n      if (res.code === 200) {\n        state.background = res.result.image_url\n      }\n    } catch (error) {\n      console.error(error)\n    }\n  }\n  const useGetArticleDetail = async () => {\n    try {\n      const { article_id } = state.currentVM.$route.query\n      let res = await server.DetailArticle({article_id})\n      if (res.code === 200) {\n        Object.assign(state.detail, res.result)\n      } else {\n        emit('show-message', {\n          msgText: res.result.msg || '获取文章失败!',\n          msgIcon: 'msgIcon',\n          msgColor: 'msgColor',\n        })\n      }\n    } catch (error) {\n      console.error(error)\n    }\n  }\n  return {\n    useGetArticleDetail,\n    useGetBackground\n  }\n}"],"names":["marked","setOptions","renderer","Renderer","gfm","tables","breaks","pedantic","smartLists","smartypants","highlight","hljs","highlightAuto","code","value","defineComponent","name","setup","props","ctx","state","reactive","currentVM","background","detail","article_id","article_title","article_describe","article_content","author","page_views","create_time","getCurrentInstance","proxy","useGetArticleDetail","useGetBackground","emit","async","$route","query","res","server","DetailArticle","assign","result","msgText","msg","msgIcon","msgColor","error","GetBackground","image_url","useArticle","toRefs","lib","class","t","viewBox","version","xmlns","width","d","fill","style","_normalizeStyle","_createElementVNode","_hoisted_4","_ctx","_hoisted_8","_hoisted_12"],"mappings":"gfAmDAA,EAAOC,WAAW,CAChBC,SAAU,IAAIF,EAAOG,SACrBC,KAAK,EACLC,QAAQ,EACRC,QAAQ,EACRC,UAAU,EAEVC,YAAY,EACZC,aAAa,EACbC,aACSC,EAAKC,cAAcC,GAAMC,QAG/B,QAAaC,GAChBC,KAAM,gBACNC,MAAMC,EAAOC,SACLC,ECvDDC,EAAS,CACdC,UAAW,KACXC,WAAY,GACZC,OAAQ,CACNC,WAAY,GACZC,cAAe,OACfC,iBAAkB,OAClBC,gBAAiB,UACjBC,OAAQ,OACRC,WAAY,EACZC,YAAa,OD8CTT,UAAYU,IAAqBC,YACjCC,oBAAEA,mBAAqBC,GC1CP,EAACjB,EAAOE,GAAQgB,KAAAA,MA4BjC,CACLF,oBAlB0BG,oBAElBZ,WAAEA,GAAeL,EAAME,UAAUgB,OAAOC,UAC1CC,QAAYC,EAAOC,cAAc,CAACjB,WAAAA,IACrB,MAAbe,EAAI3B,YACC8B,OAAOvB,EAAMI,OAAQgB,EAAII,UAE3B,eAAgB,CACnBC,QAASL,EAAII,OAAOE,KAAO,UAC3BC,QAAS,UACTC,SAAU,mBAGPC,WACCA,MAAMA,KAKhBd,iBA7BuBE,kBAEjBG,QAAYC,EAAOS,gBACN,MAAbV,EAAI3B,SACAU,WAAaiB,EAAII,OAAOO,iBAEzBF,WACCA,MAAMA,ODkCkCG,CAAWlC,EAAOE,EAAOD,2IAItEkC,EAAOjC,UADL,KAELkC,SACAtD,4CAhEKuD,MAAM,yBAMLA,MAAM,uBAELA,MAAM,uCACNA,MAAM,qCAENA,MAAM,qCACJA,MAAM,0FACcC,kBAAaD,MAAO,OAAiBE,QAAQ,gBAAMC,cAAmCC,mCAAY,cAAWC,mCAA+tBC,6sBAAeC,KAAI,mDAKn3BP,MAAM,wEACcC,kBAAaD,MAAO,OAAiBE,QAAQ,gBAAMC,cAAmCC,mCAAY,cAAWC,mCAA+hHC,4xHAUnqH,qBA1BFE,MAAMC,yHAKNC,EAA+D,oCAC/DA,EAA0E,IAA1EC,IAA6CC,SAAOtC,iEAQ9C,YAHJuC,iEAMAC,qGAO2Cd"}