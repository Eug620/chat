{"version":3,"file":"index.88ef85e9.js","sources":["../../src/views/pages/markdown-edit/useMarkdown.js","../../src/views/pages/markdown-edit/index.vue"],"sourcesContent":["/* \n * @Author       : Eug\n * @Date         : 2021-03-24 11:00:25\n * @LastEditTime : 2021-03-26 12:30:53\n * @LastEditors  : Eug\n * @Descripttion : Descripttion\n * @FilePath     : /chat/src/views/pages/markdown-edit/useMarkdown.js\n */\nimport { reactive } from \"vue\";\nimport server from '/@/server'\nimport lib from '/@/lib'\n\nexport const useMarkStates = (props) => {\n    return reactive({\n        currentVM: null,\n        msgShow: \"要显示的内容\",\n        dilogStatus: false,\n        markedOption: {\n            isShowIcon: true,\n            isShowNav: true,\n            isShowEdit: true,\n            isFullPage: false,\n            isShowPreview: true,\n            mdValue: \"## Chat-Editor\"\n        },\n        articleForm: {\n            title: '',\n            describe: ''\n        }\n    })\n}\n\nexport const useMark = (props, state, { emit }) => {\n    const useMarkedEvent = (v) => {\n        state.markedOption.mdValue = v\n    }\n    const _mergeProps = () => {\n        const { user_name, user_id } = lib.GetUserInfo()\n        return {\n            \"article_title\": state.articleForm.title,\n            \"author\": user_name || \"\",\n            \"article_describe\": state.articleForm.describe,\n            \"article_content\": state.markedOption.mdValue,\n            \"user_id\": user_id || \"\"\n        }\n    }\n    const useSaveArticle = async () => {\n        try {\n            const _info = lib.GetUserInfo()\n            if (_info) {\n                let res = await server.CreateArticle(_mergeProps())\n                if (res.code === 200) {\n                    console.log(res,'200');\n                    emit('show-message', {\n                        msgText: '新增文章成功！',\n                        msgIcon: 'msgIcon',\n                        msgColor: 'msgColor',\n                    })\n                    setTimeout(() => {\n                        state.currentVM.$router.push('Dashboard')\n                    },500)\n                } else {\n                    console.log(res, 'error')\n                    emit('show-message', {\n                        msgText: '新增文章失败！',\n                        msgIcon: 'msgIcon',\n                        msgColor: 'msgColor',\n                    })\n                }\n            } else {\n                emit('show-message', {\n                    msgText: '请登录！！！',\n                    msgIcon: 'msgIcon',\n                    msgColor: 'msgColor',\n                })\n                setTimeout(() => {\n                    emit('show-info', true)\n                }, 500)\n            }\n        } catch (error) {\n            emit('show-message', {\n                msgText: '服务器错误！',\n                msgIcon: 'msgIcon',\n                msgColor: 'msgColor',\n            })\n        }\n    }\n\n    return {\n        useMarkedEvent,\n        useSaveArticle\n    }\n\n}","<!--\n * @Author       : Eug\n * @Date         : 2021-03-11 17:57:04\n * @LastEditTime : 2021-04-20 15:37:39\n * @LastEditors  : Eug\n * @Descripttion : Descripttion\n * @FilePath     : /chat/src/views/pages/markdown-edit/index.vue\n-->\n<template>\n  <chat-container>\n    <div class=\"pt-4\">\n      <div class=\"mt-10 sm:mt-0\">\n        <div class=\"md:grid md:grid-cols-3 md:gap-6\">\n          <div class=\"mt-5 md:mt-0 md:col-span-3\">\n              <div class=\"shadow overflow-hidden sm:rounded-md\">\n                <div class=\"px-4 py-5 bg-white sm:p-6\">\n                  <div class=\"grid grid-cols-6 gap-6\">\n\n                    <div class=\"col-span-6 sm:col-span-4\">\n                      <label\n                        class=\"pl-3 border-double border-4 border-light-blue-500 border-t-0 border-r-0 border-b-0 text-lg font-medium antialiased font-mono text-purple-600 text-opacity-70 block text-sm font-medium text-gray-700\"\n                      >Title</label>\n                      <input\n                        type=\"text\"\n                        placeholder=\"Title...\"\n                        v-model=\"articleForm.title\"\n                        class=\"ml-8 pl-10 my-4 placeholder-gray-500 border-t-0 border-b-0 border-r-0 rounded-3xl focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md\"\n                      />\n                    </div>\n\n                    <div class=\"col-span-6 sm:col-span-4\">\n                      <label\n                        class=\"pl-3 border-double border-4 border-light-blue-500 border-t-0 border-r-0 border-b-0 text-lg font-medium antialiased font-mono text-purple-600 text-opacity-70 block text-sm font-medium text-gray-700\"\n                      >Describe</label>\n                      <input\n                        type=\"text\"\n                        placeholder=\"Describe...\"\n                        v-model=\"articleForm.describe\"\n                        class=\"ml-8 pl-10 my-4 placeholder-gray-500 border-t-0 border-b-0 border-r-0 rounded-3xl focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md\"\n                      />\n                    </div>\n\n                    <div class=\"col-span-6\">\n                      <label\n                        class=\"pl-3 mb-6 border-double border-4 border-light-blue-500 border-t-0 border-r-0 border-b-0 text-lg font-medium antialiased font-mono text-purple-600 text-opacity-70 block text-sm font-medium text-gray-700\"\n                      >Substance</label>\n                      <div class=\"border-gray-300 border h-screen\">\n                        <chat-editor\n                          v-model:mdValue=\"markedOption.mdValue\"\n                          v-model:isFullPage=\"markedOption.isFullPage\"\n                          v-model:isShowEdit=\"markedOption.isShowEdit\"\n                          v-model:isShowPreview=\"markedOption.isShowPreview\"\n                          v-model:isShowNav=\"markedOption.isShowNav\"\n                          v-model:isShowIcon=\"markedOption.isShowIcon\"\n                          @childevent=\"useMarkedEvent\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"px-4 py-3 bg-white text-right sm:px-6\">\n                  <div\n                    @click=\"useSaveArticle\"\n                    class=\"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n                  >Save</div>\n                </div>\n              </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </chat-container>\n</template>\n\n<script>\nimport { toRefs, getCurrentInstance, defineComponent } from \"vue\";\nimport { useMark, useMarkStates } from \"./useMarkdown\";\nexport default defineComponent({\n  setup(props, ctx) {\n    const state = useMarkStates(props);\n    state.currentVM = getCurrentInstance().proxy;\n    const { useMarkedEvent, useSaveArticle } = useMark(props, state, ctx);\n    return {\n      ...toRefs(state),\n      useMarkedEvent,\n      useSaveArticle\n    };\n  }\n})\n</script>\n\n<style>\n</style>"],"names":["useMark","props","state","emit","useMarkedEvent","v","markedOption","mdValue","useSaveArticle","async","lib","GetUserInfo","res","server","CreateArticle","user_name","user_id","article_title","articleForm","title","author","article_describe","describe","article_content","_mergeProps","code","log","msgText","msgIcon","msgColor","currentVM","$router","push","error","defineComponent","setup","ctx","reactive","msgShow","dilogStatus","isShowIcon","isShowNav","isShowEdit","isFullPage","isShowPreview","getCurrentInstance","proxy","toRefs","class","type","_hoisted_13","onClick"],"mappings":"2dAYO,MAoBMA,EAAU,CAACC,EAAOC,GAASC,KAAAA,MAwD7B,CACHC,eAxDoBC,MACdC,aAAaC,QAAUF,GAwD7BG,eA5CmBC,iBAEDC,EAAIC,cACP,KACHC,QAAYC,EAAOC,cAdf,YACVC,UAAEA,UAAWC,GAAYN,EAAIC,oBAC5B,CACHM,cAAiBf,EAAMgB,YAAYC,MACnCC,OAAUL,GAAa,GACvBM,iBAAoBnB,EAAMgB,YAAYI,SACtCC,gBAAmBrB,EAAMI,aAAaC,QACtCS,QAAWA,GAAW,KAOmBQ,IACpB,MAAbZ,EAAIa,cACIC,IAAId,EAAI,SACX,eAAgB,CACjBe,QAAS,UACTC,QAAS,UACTC,SAAU,yBAEH,OACDC,UAAUC,QAAQC,KAAK,eAC/B,eAEMN,IAAId,EAAK,WACZ,eAAgB,CACjBe,QAAS,UACTC,QAAS,UACTC,SAAU,qBAIb,eAAgB,CACjBF,QAAS,SACTC,QAAS,UACTC,SAAU,yBAEH,OACF,aAAa,KACnB,WAEFI,KACA,eAAgB,CACjBN,QAAS,SACTC,QAAS,UACTC,SAAU,mBCNRK,GAChBC,MAAMlC,EAAOmC,SACLlC,EDlECmC,EAAS,CACZP,UAAW,KACXQ,QAAS,SACTC,aAAa,EACbjC,aAAc,CACVkC,YAAY,EACZC,WAAW,EACXC,YAAY,EACZC,YAAY,EACZC,eAAe,EACfrC,QAAS,kBAEbW,YAAa,CACTC,MAAO,GACPG,SAAU,QCqDZQ,UAAYe,IAAqBC,YACjC1C,eAAEA,iBAAgBI,GAAmBR,EAAQC,EAAOC,EAAOkC,mIAE5DW,EAAO7C,UADL,CAELE,eAAAA,EACAI,eAAAA,iBA1EKwC,MAAM,WACJA,MAAM,oBACJA,MAAM,sCACFA,MAAM,iCACJA,MAAM,2CACJA,MAAM,gCAEJA,MAAM,wlBA4BmC,uOAc7CA,MAAM,kNASf,WADE,WADE,WADI,WAPE,WADE,WA9BE,2BAJFC,mCAEA,mUAUAA,sCAEA,0TAQFC,iDAGY,iGACA,wBAAyB,+EACzB,6GACA,2GACA,uBAAwB,8EAC/B,mOASPC,4EACG"}